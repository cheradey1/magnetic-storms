<!DOCTYPE html>
<html lang="uk">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>–°–æ–Ω—è—á–Ω–∞ –ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ –ó–¥–æ—Ä–æ–≤'—è</title>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-YOUR_PUBLISHER_ID"></script>
	<script src="https://cdn.tailwindcss.com"></script>
	<style>
    	.sun-icon {
        	width: 20px;
        	height: 20px;
        	border-radius: 50%;
        	position: relative;
        	transition: background-color 0.5s ease, box-shadow 0.5s ease;
        	margin: 0;
    	}
    	.sun-low {
        	background-color: #facc15;
        	box-shadow: 0 0 30px rgba(250, 204, 21, 0.7);
    	}
    	.sun-moderate {
        	background-color: #f97316;
        	box-shadow: 0 0 40px rgba(249, 115, 22, 0.8);
    	}
    	.sun-high {
        	background-color: #ef4444;
        	box-shadow: 0 0 50px rgba(239, 68, 68, 0.9);
    	}
    	body {
        	font-family: 'Inter', sans-serif;
        	background-color: #1f2937;
        	color: #f3f4f6;
    	}
    	.card {
        	background-color: #374151;
        	border-radius: 0.75rem;
        	padding: 1.5rem;
        	margin-bottom: 1.5rem;
        	box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    	}
    	.forecast-card {
        	background-color: #4b5563;
        	border-radius: 0.5rem;
        	padding: 1rem;
        	text-align: center;
        	display: flex;
        	flex-direction: column;
        	justify-content: space-between;
        	min-height: 120px;
        	cursor: pointer;
        	transition: background-color 0.3s;
    	}
    	.forecast-card:hover {
        	background-color: #6b7280;
    	}
    	.health-info {
        	border-top: 1px solid #4b5563;
        	margin-top: 1.5rem;
        	padding-top: 1.5rem;
        	display: none;
    	}
    	.health-info.active {
        	display: block;
    	}
    	.hourly-forecast {
        	border-top: 1px solid #4b5563;
        	margin-top: 1.5rem;
        	padding-top: 1.5rem;
    	}
    	.hour-block {
        	background-color: #4b5563;
        	border-radius: 0.5rem;
        	padding: 0.5rem;
        	transition: all 0.3s ease;
        	cursor: pointer;
        	position: relative;
    	}
    	.hour-block:hover {
        	background-color: #6b7280;
        	transform: translateY(-2px);
    	}
    	.hour-block.g1 { border-left: 3px solid #f97316; }
    	.hour-block.g2 { border-left: 3px solid #fb923c; }
    	.hour-block.g3 { border-left: 3px solid #ef4444; }
    	.hour-block.g4 { border-left: 3px solid #dc2626; }
    	.hour-block.g5 { border-left: 3px solid #b91c1c; }
    	.loader {
        	border: 4px solid #374151;
        	border-top: 4px solid #f97316;
        	border-radius: 50%;
        	width: 30px;
        	height: 30px;
        	animation: spin 1s linear infinite;
        	margin: 10px auto;
    	}
    	@keyframes spin {
        	0% { transform: rotate(0deg); }
        	100% { transform: rotate(360deg); }
    		}
		.body-container {
			display: flex;
			align-items: center;
			gap: 2rem;
		}
		
		.body-visualization {
			width: 80px;
			height: 200px;
			position: relative;
			background: url('icons/human.png') no-repeat bottom center;
			background-size: auto 200px;
		}
		
		.body-visualization img {
			width: 100%;
			height: 100%;
			object-fit: contain;
			filter: invert(1); /* –†–æ–±–∏–º–æ —ñ–∫–æ–Ω–∫—É –±—ñ–ª–æ—é */
		}
		
		.pain-point {
			position: absolute;
			width: 25px;
			height: 25px;
			background: rgba(239, 68, 68, 0.6);
			border: 3px solid rgba(239, 68, 68, 0.8);
			border-radius: 50%;
			transform: translate(-50%, -50%) scale(1);
			animation: pulse 2s infinite;
			z-index: 10;
		}
		
		.pain-point.head { top: 5%; left: 50%; }
		.pain-point.heart { top: 22%; left: 50%; }
		.pain-point.stomach { top: 38%; left: 50%; }
		.pain-point.arms-left { top: 30%; left: 20%; }
		.pain-point.arms-right { top: 30%; left: 80%; }
		.pain-point.legs-left { top: 70%; left: 35%; }
		.pain-point.legs-right { top: 70%; left: 65%; }
		
		.pressure-container {
			margin-left: 2rem;
			margin-right: 2rem;
			display: flex;
			flex-direction: column;
			align-items: center;
		}
		
		.pressure-title {
			color: #9ca3af;
			font-size: 14px;
			margin-bottom: 5px;
			text-align: center;
		}
		
		.pressure-scale {
			width: 40px;
			height: 200px;
			background: #374151;
			position: relative;
			border-left: 2px solid #4b5563;
			background-image: 
				linear-gradient(to top, #4b5563 1px, transparent 1px),
				linear-gradient(to right, #4b5563 1px, transparent 1px);
			background-size: 100% 10%, 100% 20px;
		}
		
		.pressure-markers {
			position: absolute;
			left: -25px;
			height: 100%;
			display: flex;
			flex-direction: column-reverse;
			justify-content: space-between;
			color: #9ca3af;
			font-size: 12px;
			padding: 5px 0;
		}
		
		.pressure-markers span {
			transform: translateY(50%);
		}
		
		.pressure-bar {
			position: absolute;
			bottom: 0;
			width: 15px;
			transition: height 0.3s ease;
			background: linear-gradient(to top, rgba(255,255,255,0.2), transparent);
		}
		
		.pressure-bar.systolic { 
			left: 5px; 
			background-color: #ef4444;
		}
		
		.pressure-bar.diastolic { 
			right: 5px;
			background-color: #3b82f6;
		}
		
		.pressure-label {
			text-align: center;
			color: #9ca3af;
			font-size: 12px;
			margin-top: 5px;
		}
		
		.pressure-bars {
			position: absolute;
			bottom: 0;
			width: 100%;
			display: flex;
			justify-content: space-around;
		}
		
		.weather-container {
			margin-left: 2rem;
			display: flex;
			flex-direction: column;
			align-items: center;
			position: relative;
			width: 100%;
		}
		
		.weather-header {
			display: flex;
			align-items: center;
			gap: 1rem;
			margin-bottom: 1rem;
			width: 100%;
		}
		
		.weather-header .sun-info {
			display: flex;
			flex-direction: row;
			gap: 1rem;
			align-items: center;
		}
		
		.weather-header .sun-info p {
			margin: 0;
			display: flex;
			align-items: center;
			gap: 0.5rem;
		}
		
		.weather-icons {
			display: grid;
			grid-template-columns: repeat(8, 1fr);
			gap: 0.5rem;
			width: 100%;
			margin-bottom: 1rem;
		}
		
		.weather-icon-container {
			text-align: center;
			padding: 0.5rem;
			background: rgba(75, 85, 99, 0.3);
			border-radius: 0.5rem;
			display: flex;
			flex-direction: column;
			justify-content: space-between;
			height: 100%;
		}
		
		.weather-details-row {
			width: 100%;
			display: flex;
			justify-content: space-around;
			color: #9ca3af;
			font-size: 14px;
			padding: 5px 0;
			background: rgba(75, 85, 99, 0.3);
			border-radius: 0.5rem;
		}
		
		.sun-info {
			display: flex;
			flex-direction: column;
			gap: 0.5rem;
		}
		
		/* –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å */
		@media (max-width: 1024px) {
			.body-container {
				flex-direction: column;
				align-items: center;
			}
			
			.body-visualization {
				width: 70px;
				height: 200px;
			}
			
			.pain-point {
				width: 23px;
				height: 23px;
			}
		}
		
		@media (max-width: 768px) {
			.body-visualization {
				width: 70px;
				height: 200px;
			}
			
			.pain-point {
				width: 23px;
				height: 23px;
			}
		}
		
		@media (max-width: 480px) {
			.body-container {
				gap: 1rem;
			}
			
			.body-visualization {
				width: 60px;
				height: 200px;
			}
			
			.pain-point {
				width: 20px;
				height: 20px;
			}
		}

		/* –î–æ–¥–∞—î–º–æ —Å—Ç–∏–ª—ñ –¥–ª—è –∫—Ä–∞—â–æ—ó –≤–∏–¥–∏–º–æ—Å—Ç—ñ –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö */
		@media (hover: none) {
			.pain-point {
				border-width: 2px;
			}
		}

		/* –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –ø—Ä–æ–ø–æ—Ä—Ü—ñ—ó –ø—Ä–∏ –∑–±—ñ–ª—å—à–µ–Ω–Ω—ñ */
		@media (min-width: 1920px) {
			.body-visualization {
				width: 90px;
				height: 200px;
			}
			
			.pain-point {
				width: 28px;
				height: 28px;
			}
		}

		.k-chart {
			height: 100px;
			position: relative;
			background: #2d3748;
			border-left: 2px solid #4b5563;
			border-bottom: 2px solid #4b5563;
			background-image: 
				linear-gradient(to right, rgba(75, 85, 99, 0.3) 1px, transparent 1px),
				linear-gradient(to top, rgba(75, 85, 99, 0.3) 1px, transparent 1px);
			background-size: 
				calc(100% / 8) 100%,  /* 8 –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∏—Ö –ª—ñ–Ω—ñ–π –¥–ª—è 3-–≥–æ–¥–∏–Ω–Ω–∏—Ö —ñ–Ω—Ç–µ—Ä–≤–∞–ª—ñ–≤ */
				100% calc(100% / 9);  /* 9 –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∏—Ö –ª—ñ–Ω—ñ–π –¥–ª—è K-—ñ–Ω–¥–µ–∫—Å—É (0-9) */
			margin-bottom: 1rem;
		}

		.k-scale {
			position: absolute;
			left: -35px;
			height: 100%;
			width: 30px;
			display: flex;
			flex-direction: column-reverse;
			justify-content: space-between;
		}

		.k-scale span {
			font-size: 12px;
			color: #9ca3af;
			text-align: right;
			width: 100%;
			height: calc(100% / 9);
			display: flex;
			align-items: center;
			justify-content: flex-end;
		}

		.time-scale {
			position: absolute;
			bottom: -25px;
			left: 0;
			width: 100%;
			display: flex;
			justify-content: space-between;
			color: #9ca3af;
			font-size: 12px;
			padding: 0;
		}

		.time-scale span {
			position: relative;
			padding-top: 5px;
			width: calc(100% / 8);
			text-align: center;
		}

		.k-bar {
			position: absolute;
			bottom: 0;
			width: calc(100% / 8);
			border-radius: 2px 2px 0 0;
			transition: height 0.3s ease;
			box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.2);
		}

		.k-bar.low { 
			background-color: #facc15;
			background: linear-gradient(to top, #facc15, #fbbf24);
		}
		.k-bar.moderate { 
			background-color: #f97316;
			background: linear-gradient(to top, #f97316, #fb923c);
		}
		.k-bar.high { 
			background-color: #ef4444;
			background: linear-gradient(to top, #ef4444, #f87171);
		}

		#forecast-container {
			display: grid;
			grid-template-columns: repeat(7, 1fr);
			gap: 2px;
		}

		.forecast-card {
			min-width: 50px;
			flex: 0 0 auto;
			background-color: #4b5563;
			border-radius: 0.5rem;
			padding: 2px;
			text-align: center;
			display: flex;
			flex-direction: column;
			justify-content: space-between;
			min-height: 30px;
		}

		.forecast-card .day-header {
			font-size: 8px;
			font-weight: bold;
			margin-bottom: 2px;
		}

		.forecast-card .k-index-value {
			font-size: 10px;
			font-weight: bold;
		}

		.forecast-card .k-index-bar {
			height: 4px;
			width: 100%;
			border-radius: 2px;
			margin-top: 2px;
		}

		.forecast-card .k-index-bar.low { background-color: #facc15; }
		.forecast-card .k-index-bar.moderate { background-color: #f97316; }
		.forecast-card .k-index-bar.high { background-color: #ef4444; }

		.forecast-card .text-sm {
			font-size: 6px;
		}

		.forecast-card .text-lg {
			font-size: 10px;
		}

		.forecast-card .text-xs {
			font-size: 4px;
		}

		.sun-container {
			display: flex;
			align-items: center;
			gap: 1rem;
			margin-top: 1rem;
		}

		.sun-info {
			display: flex;
			flex-direction: column;
			gap: 0.5rem;
		}

		.weekly-forecast {
			width: 100%;
			margin-bottom: 1rem;
			background: rgba(75, 85, 99, 0.3);
			border-radius: 0.5rem;
			padding: 0.5rem;
		}

		.weekly-forecast h2 {
			display: none; /* –ü—Ä–∏—Ö–æ–≤—É—î–º–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ */
		}

		.weekly-forecast p {
			display: none; /* –ü—Ä–∏—Ö–æ–≤—É—î–º–æ –ø—ñ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ */
		}

		@keyframes pulse {
			0% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; }
			50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.8; }
			100% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; }
		}
	</style>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
	<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
	<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
	<link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#374151">
</head>
<body class="p-4">
	<div class="max-w-4xl mx-auto">
    	<div class="card mb-6">
        	<div class="flex justify-between items-start mb-4">
            	<div>
                	<h1 class="text-2xl font-bold">–°–æ–Ω—è—á–Ω–∞ –ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ –ó–¥–æ—Ä–æ–≤'—è</h1>
                	<p class="text-sm text-gray-400" id="current-date">–î–∞—Ç–∞...</p>
            	</div>
            	<div class="text-right">
                	<p class="text-lg">–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω:</p>
                	<p class="text-gray-300 font-semibold" id="current-condition-text">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
            	</div>
        	</div>
        	<div class="flex flex-col md:flex-row items-center justify-around mb-4">
				<div class="body-container">
					<div class="body-visualization">
						<div class="pain-point head" title="–ì–æ–ª–æ–≤–Ω–∏–π –±—ñ–ª—å"></div>
						<div class="pain-point heart" title="–°–µ—Ä—Ü–µ–≤–∏–π –±—ñ–ª—å"></div>
						<div class="pain-point stomach" title="–ù—É–¥–æ—Ç–∞"></div>
						<div class="pain-point arms-left" title="–ë—ñ–ª—å —É —Å—É–≥–ª–æ–±–∞—Ö"></div>
						<div class="pain-point arms-right" title="–ë—ñ–ª—å —É —Å—É–≥–ª–æ–±–∞—Ö"></div>
						<div class="pain-point legs-left" title="–ë—ñ–ª—å —É –Ω–æ–≥–∞—Ö"></div>
						<div class="pain-point legs-right" title="–ë—ñ–ª—å —É –Ω–æ–≥–∞—Ö"></div>
					</div>
					
					<div class="pressure-container">
						<div class="pressure-title">–¢–∏—Å–∫ –ª—é–¥–∏–Ω–∏</div>
						<div class="pressure-scale">
							<div class="pressure-markers">
								<!-- –í–∏–¥–∞–ª—è—î–º–æ —Ü–∏—Ñ—Ä–∏ -->
							</div>
							<div class="pressure-bars">
								<div class="pressure-bar systolic"></div>
								<div class="pressure-bar diastolic"></div>
							</div>
						</div>
						<div class="pressure-label">
							<span class="systolic-value">120</span>/<span class="diastolic-value">80</span>
						</div>
					</div>

					<div class="weather-container">
						<div class="weather-header">
							<div id="sun-visualization">
								<div id="sun-icon" class="sun-icon"></div>
							</div>
							<div class="sun-info">
								<p>
									<ion-icon name="sunny-outline" class="text-yellow-400"></ion-icon>
									<span class="font-semibold">K-—ñ–Ω–¥–µ–∫—Å:</span>
									<span id="k-index" class="text-xl font-bold">...</span>
									<span class="text-sm text-gray-400">/ 9</span>
								</p>
								<p>
									<ion-icon name="person-outline" class="text-green-400"></ion-icon>
									<span class="font-semibold">G-–∫–ª–∞—Å:</span>
									<span id="g-class" class="text-lg font-bold">...</span>
									<span id="g-class-description" class="text-sm text-gray-400"></span>
								</p>
							</div>
						</div>
						<div class="weekly-forecast">
							<div id="forecast-container"></div>
						</div>
						<div class="weather-icons">
							<!-- –Ü–∫–æ–Ω–∫–∏ –ø–æ–≥–æ–¥–∏ –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ —á–µ—Ä–µ–∑ JavaScript -->
						</div>
						<div class="weather-details-row">
							<span>5¬∞C</span>
							<span>–û–ø–∞–¥–∏: 25%</span>
							<span>–í–æ–ª–æ–≥—ñ—Å—Ç—å: 58%</span>
							<span>–í—ñ—Ç–µ—Ä: 19 –∫–º/–≥–æ–¥</span>
						</div>
					</div>
				</div>
        	</div>
        	<div id="health-info" class="health-info">
            	<h3 class="text-lg font-semibold mb-2">–í–ø–ª–∏–≤ –Ω–∞ —Å–∞–º–æ–ø–æ—á—É—Ç—Ç—è —Ç–∞ –ø–æ—Ä–∞–¥–∏</h3>
            	<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                	<div>
                    	<div class="flex items-center mb-1 text-yellow-400 font-medium">
                        	<ion-icon name="sparkles-outline" class="mr-2 text-xl"></ion-icon>
                        	<span>–ú–æ–∂–ª–∏–≤—ñ —Å–∏–º–ø—Ç–æ–º–∏</span>
                    	</div>
                    	<p id="symptoms-text" class="text-sm">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
                	</div>
                	<div>
                    	<div class="flex items-center mb-1 text-green-400 font-medium">
                        	<ion-icon name="bulb-outline" class="mr-2 text-xl"></ion-icon>
                        	<span>–Ø–∫ –±–æ—Ä–æ—Ç–∏—Å—è</span>
                    	</div>
                    	<p id="advice-text" class="text-sm">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
                	</div>
            	</div>
        	</div>
        	<div id="loading-indicator" class="text-center">
            	<div class="loader"></div>
            	<p class="text-sm text-gray-400">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö...</p>
        	</div>
    	</div>
   	 
    	<!-- –†–æ–∑–¥—ñ–ª –¥–ª—è –ø–æ–º–∏–ª–æ–∫ -->
    	<div id="error-container" class="card bg-red-900 hidden">
        	<h2 class="text-xl font-semibold mb-2">–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö</h2>
        	<p id="error-message" class="text-sm">–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –¥–∞–Ω—ñ. –°–ø—Ä–æ–±—É–π—Ç–µ –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É.</p>
    	</div>
   	 
    	<!-- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∏–π —Ä–æ–∑–¥—ñ–ª -->
    	<div class="card bg-gray-800 mt-4">
        	<h2 class="text-lg font-semibold mb-2">–ü—Ä–æ —Å–æ–Ω—è—á–Ω—É –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</h2>
        	<p class="text-sm text-gray-300 mb-2">
            	K-—ñ–Ω–¥–µ–∫—Å - —Ü–µ –ø–æ–∫–∞–∑–Ω–∏–∫, —â–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î —Ä—ñ–≤–µ–Ω—å –≥–µ–æ–º–∞–≥–Ω—ñ—Ç–Ω–æ—ó –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –ó–µ–º–ª—ñ, —Å–ø—Ä–∏—á–∏–Ω–µ–Ω–æ—ó —Å–æ–Ω—è—á–Ω–æ—é –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—é.
            	–í—ñ–Ω –≤–∏–º—ñ—Ä—é—î—Ç—å—Å—è –∫–æ–∂–Ω—ñ 3 –≥–æ–¥–∏–Ω–∏ —ñ –º–∞—î —à–∫–∞–ª—É –≤—ñ–¥ 0 –¥–æ 9.
        	</p>
        	<p class="text-sm text-gray-300">
            	G-–∫–ª–∞—Å –ø–æ–∑–Ω–∞—á–∞—î —Å–∏–ª—É –≥–µ–æ–º–∞–≥–Ω—ñ—Ç–Ω–æ—ó –±—É—Ä—ñ: G1 (–Ω–µ–∑–Ω–∞—á–Ω–∞), G2 (–ø–æ–º—ñ—Ä–Ω–∞), G3 (—Å–∏–ª—å–Ω–∞),
            	G4 (–∂–æ—Ä—Å—Ç–∫–∞) —ñ G5 (–µ–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–∞).
        	</p>
        	<p class="text-xs text-gray-500 mt-4">
            	–î–∞–Ω—ñ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ. –û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è: <span id="last-updated">...</span>
        	</p>
    	</div>
	</div>
	<script>
    	const sunIcon = document.getElementById('sun-icon');
    	const kIndexElement = document.getElementById('k-index');
    	const gClassElement = document.getElementById('g-class');
    	const gClassDescElement = document.getElementById('g-class-description');
    	const currentDateElement = document.getElementById('current-date');
    	const conditionTextElement = document.getElementById('current-condition-text');
    	const symptomsTextElement = document.getElementById('symptoms-text');
    	const adviceTextElement = document.getElementById('advice-text');
    	const forecastContainer = document.getElementById('forecast-container');
    	const healthInfo = document.getElementById('health-info');
    	const loadingIndicator = document.getElementById('loading-indicator');
    	const errorContainer = document.getElementById('error-container');
    	const errorMessage = document.getElementById('error-message');
    	const lastUpdatedElement = document.getElementById('last-updated');
    	const day1Title = document.getElementById('day1-title');
    	const day2Title = document.getElementById('day2-title');
    	const day3Title = document.getElementById('day3-title');

    	const healthAdvice = [
        	{ range: [0, 2], condition: '–°–ø–æ–∫—ñ–π–Ω–æ', gClass: 'G0',
            	symptoms: '–í –Ω–æ—Ä–º—ñ. –¢–∏—Å–∫ –≤ –Ω–æ—Ä–º—ñ.',
            	advice: '–ü—Ä–æ–¥–æ–≤–∂—É–π—Ç–µ –∑–≤–∏—á–∞–π–Ω–∏–π —Ä–µ–∂–∏–º –¥–Ω—è.'
        	},
        	{ range: [3, 4], condition: '–°–ª–∞–±–∫—ñ –∑–±—É—Ä–µ–Ω–Ω—è', gClass: 'G0',
            	symptoms: '–ù–µ–∑–Ω–∞—á–Ω–∏–π –≥–æ–ª–æ–≤–Ω–∏–π –±—ñ–ª—å —É –º–µ—Ç–µ–æ—á—É—Ç–ª–∏–≤–∏—Ö –ª—é–¥–µ–π.',
            	advice: '–í–∏–ø–∏–π—Ç–µ –±—ñ–ª—å—à–µ –≤–æ–¥–∏, –æ–±–º–µ–∂—Ç–µ –∫–∞–≤—É. –ö–æ—Ä–∏—Å–Ω—ñ —Ç—Ä–∞–≤\'—è–Ω—ñ —á–∞—ó –∑ –º–µ–ª—ñ—Å–∏ —Ç–∞ –º\'—è—Ç–∏.'
        	},
        	{ range: [5, 6], condition: '–ü–æ–º—ñ—Ä–Ω—ñ –∑–±—É—Ä–µ–Ω–Ω—è', gClass: 'G1',
            	symptoms: '–ì–æ–ª–æ–≤–Ω–∏–π –±—ñ–ª—å.',
            	advice: '–í–∏–ø–∏–π—Ç–µ –∑–∞–ª–ø–æ–º 2 —Å–∫–ª—è–Ω–∫–∏ –≤–æ–¥–∏. –û–±–º–µ–∂—Ç–µ –∫–∞–≤—É, —á–æ—Ä–Ω–∏–π —á–∞–π. –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ: –Ω–∞—Å—Ç—ñ–π –≥–ª–æ–¥—É, –≤–∞–ª–µ—Ä—ñ–∞–Ω–∏, —à–∏–ø—à–∏–Ω–∏.'
        	},
        	{ range: [7, 8], condition: '–°–∏–ª—å–Ω–∞ –±—É—Ä—è', gClass: 'G2',
            	symptoms: '–Ü–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∏–π –≥–æ–ª–æ–≤–Ω–∏–π –±—ñ–ª—å, –Ω—É–¥–æ—Ç–∞.',
            	advice: '–¢–µ—Ä–º—ñ–Ω–æ–≤–æ –≤–∏–ø–∏–π—Ç–µ 2-3 —Å–∫–ª—è–Ω–∫–∏ –≤–æ–¥–∏. –ö–∞—Ç–µ–≥–æ—Ä–∏—á–Ω–æ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ: –∫–∞–≤–∞, –º—ñ—Ü–Ω–∏–π —á–∞–π, –∞–ª–∫–æ–≥–æ–ª—å. –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ —Ç—Ä–∞–≤–∏: –≥–ª—ñ–¥, –ø—É—Å—Ç–∏—Ä–Ω–∏–∫, –º\'—è—Ç–∞, –º–µ–ª—ñ—Å–∞.'
        	},
        	{ range: [9, 9], condition: '–ï–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–∞ –±—É—Ä—è', gClass: 'G3',
            	symptoms: '–°–∏–ª—å–Ω–∏–π –≥–æ–ª–æ–≤–Ω–∏–π –±—ñ–ª—å, –∑–∞–ø–∞–º–æ—Ä–æ—á–µ–Ω–Ω—è, –Ω—É–¥–æ—Ç–∞.',
            	advice: '–ù–µ–≥–∞–π–Ω–æ –∑–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ –ª—ñ–∫–∞—Ä—è! –í–∏–ø–∏–π—Ç–µ –±–∞–≥–∞—Ç–æ –≤–æ–¥–∏. –¢—Ä–∞–≤\'—è–Ω—ñ –∑–±–æ—Ä–∏: –≥–ª—ñ–¥ + –ø—É—Å—Ç–∏—Ä–Ω–∏–∫ + –≤–∞–ª–µ—Ä—ñ–∞–Ω–∞. –ü–æ–≤–Ω–∏–π —Å–ø–æ–∫—ñ–π, –ø—Ä–æ–≤—ñ—Ç—Ä—é–≤–∞–Ω–Ω—è –ø—Ä–∏–º—ñ—â–µ–Ω–Ω—è.'
        	}
    	];

    	function updateDate(dateString) {
        	const dateParts = dateString.split('.');
        	const day = parseInt(dateParts[0], 10);
        	const month = parseInt(dateParts[1], 10) - 1;
        	const year = parseInt(dateParts[2], 10);
        	const date = new Date(year, month, day);
        	const options = { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric', format: 'EEEE dd MMMM yyyy' };
        	const locale = 'uk-UA';
        	const formattedDate = date.toLocaleDateString(locale, options);
        	currentDateElement.textContent = formattedDate;
    	}

    	function getHealthInfo(kIndex) {
        	const info = healthAdvice.find(item => kIndex >= item.range[0] && kIndex <= item.range[1])
            	|| { condition: '–ù/–î', symptoms: '–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö.', advice: '–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö.', gClass: 'N/A' };
        	return info;
    	}

    	function updateCurrentActivity(kIndex, date) {
        	const health = getHealthInfo(kIndex);
        	kIndexElement.textContent = kIndex;
        	gClassElement.textContent = health.gClass;
        	gClassDescElement.textContent = `(${health.condition})`;
        	conditionTextElement.textContent = `${health.condition}`;
        	sunIcon.className = 'sun-icon';
        	if (kIndex <= 3) sunIcon.classList.add('sun-low');
        	else if (kIndex <= 5) sunIcon.classList.add('sun-moderate');
        	else sunIcon.classList.add('sun-high');
        	symptomsTextElement.textContent = health.symptoms;
        	adviceTextElement.textContent = health.advice;
        	healthInfo.classList.add('active');
        	updateDate(date);
        	
        	// –û–Ω–æ–≤–ª—é—î–º–æ —Ç–æ—á–∫–∏ –±–æ–ª—é
        	updateBodyPainPoints(kIndex);
        	
        	const pressure = calculatePressure(kIndex);
        	updatePressureBars(pressure.systolic, pressure.diastolic);
    	}

    	function setKIndexBarColor(barElement, kIndex) {
        	barElement.className = 'h-2 w-full rounded mt-1';
        	if (kIndex <= 3) barElement.classList.add('bg-yellow-500');
        	else if (kIndex <= 5) barElement.classList.add('bg-orange-500');
        	else barElement.classList.add('bg-red-500');
        	
        	// Add G-class indicators
        	if (kIndex >= 5 && kIndex < 6) barElement.classList.add('g1');
        	else if (kIndex >= 6 && kIndex < 7) barElement.classList.add('g2');
        	else if (kIndex >= 7 && kIndex < 8) barElement.classList.add('g3');
        	else if (kIndex >= 8 && kIndex < 9) barElement.classList.add('g4');
        	else if (kIndex >= 9) barElement.classList.add('g5');
    	}

    	function displayForecast(kIndexArray) {
        	forecastContainer.innerHTML = '';
        	const today = new Date();
        	const daysOfWeek = ["–ù–µ–¥—ñ–ª—è", "–ü–æ–Ω–µ–¥—ñ–ª–æ–∫", "–í—ñ–≤—Ç–æ—Ä–æ–∫", "–°–µ—Ä–µ–¥–∞", "–ß–µ—Ç–≤–µ—Ä", "–ü'—è—Ç–Ω–∏—Ü—è", "–°—É–±–æ—Ç–∞"];
        	let dayIndex = today.getDay();
        	kIndexArray.forEach((kIndex, index) => {
            	const forecastDate = new Date(today);
            	forecastDate.setDate(today.getDate() + index);
            	const dayName = daysOfWeek[dayIndex];
            	const card = document.createElement('div');
            	card.className = 'forecast-card';
            	
            	// –í–∏–∑–Ω–∞—á–∞—î–º–æ –∫–ª–∞—Å –¥–ª—è –∫–æ–ª—å–æ—Ä—É –ø–æ–ª–æ—Å–∫–∏
            	let barClass = 'low';
            	if (kIndex > 5) barClass = 'high';
            	else if (kIndex > 3) barClass = 'moderate';
            	
            	card.innerHTML = `
                	<div class="day-header">${dayName}</div>
                	<div class="k-index-value">K-—ñ=${kIndex}</div>
                	<div class="k-index-bar ${barClass}"></div>
            	`;
            	card.addEventListener('click', () => {
                	updateCurrentActivity(kIndex, forecastDate.toLocaleDateString('uk-UA', { day: 'numeric', month: 'numeric', year: 'numeric' }));
            	});
            	forecastContainer.appendChild(card);
            	dayIndex = (dayIndex + 1) % 7;
        	});
    	}
   	 
    	// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è 3-–¥–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑—É
    	async function fetchThreeDayForecast() {
        	try {
            	const cachedData = getCachedData('three-day-forecast');
            	if (cachedData) {
                	return cachedData;
            	}
            	
            	const response = await fetch('https://services.swpc.noaa.gov/text/3-day-forecast.txt');
           	 
            	if (!response.ok) {
                	throw new Error(`HTTP error! Status: ${response.status}`);
            	}
           	 
            	const textData = await response.text();
            	
            	// –ö–µ—à—É—î–º–æ –æ—Ç—Ä–∏–º–∞–Ω—ñ –¥–∞–Ω—ñ
            	cacheData('three-day-forecast', textData, 180); // –ö–µ—à—É—î–º–æ –Ω–∞ 3 –≥–æ–¥–∏–Ω–∏
            	
            	// –û–Ω–æ–≤–ª—é—î–º–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–Ω—ñ–≤ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –µ–ª–µ–º–µ–Ω—Ç–∏ —ñ—Å–Ω—É—é—Ç—å
            	const today = new Date();
            	const tomorrow = new Date(today);
            	tomorrow.setDate(today.getDate() + 1);
            	const dayAfterTomorrow = new Date(today);
            	dayAfterTomorrow.setDate(today.getDate() + 2);
            	
            	const formatDate = (date) => {
                	return date.toLocaleDateString('uk-UA', {day: 'numeric', month: 'long'});
            	};
           	 
            	// –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º
            	if (day1Title) day1Title.textContent = formatDate(today);
            	if (day2Title) day2Title.textContent = formatDate(tomorrow);
            	if (day3Title) day3Title.textContent = formatDate(dayAfterTomorrow);
           	 
            	return textData;
        	} catch (error) {
            	console.error("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ 3-–¥–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑—É:", error);
            	
            	// –Ø–∫—â–æ —î –æ—Ñ–ª–∞–π–Ω –∫–µ—à, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –π–æ–≥–æ
            	const cachedData = getCachedData('three-day-forecast');
            	if (cachedData) {
                	console.log("–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∫–µ—à–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ –¥–ª—è 3-–¥–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑—É");
                	return cachedData;
            	}
            	
            	// –Ø–∫—â–æ –Ω–µ–º–∞—î –∫–µ—à—É, –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –±–∞–∑–æ–≤—ñ –¥–∞–Ω—ñ
            	return null;
        	}
    	}

    	async function fetchKIndexData() {
        	try {
            	loadingIndicator.classList.remove('hidden');
            	errorContainer.classList.add('hidden');
            	
            	// –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –º–∏ –æ–Ω–ª–∞–π–Ω
            	if (!navigator.onLine) {
                	throw new Error("–í–∏ –æ—Ñ–ª–∞–π–Ω. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∫–µ—à–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ.");
            	}
           	 
            	const res = await fetch('https://services.swpc.noaa.gov/json/planetary_k_index_1m.json');
           	 
            	if (!res.ok) {
                	throw new Error(`HTTP error! Status: ${res.status}`);
            	}
           	 
            	const data = await res.json();
            	
            	// –ö–µ—à—É—î–º–æ –æ—Ç—Ä–∏–º–∞–Ω—ñ –¥–∞–Ω—ñ
            	cacheData('k-index-data', data, 180); // –ö–µ—à—É—î–º–æ –Ω–∞ 3 –≥–æ–¥–∏–Ω–∏
            	
            	const today = new Date().toISOString().slice(0, 10);
            	const todayData = data.filter(d => d.time_tag.includes(today)).map(d => d.kp_index);
           	 
            	if (todayData.length === 0) {
                	throw new Error("–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –∑–∞ —Å—å–æ–≥–æ–¥–Ω—ñ");
            	}
           	 
            	const averageK = Math.round(todayData.reduce((a, b) => a + b, 0) / todayData.length);
            	const todayDate = new Date().toLocaleDateString('uk-UA', { day: 'numeric', month: 'numeric', year: 'numeric' });
           	 
            	// –û—Ç—Ä–∏–º—É—î–º–æ 3-–¥–µ–Ω–Ω–∏–π –ø—Ä–æ–≥–Ω–æ–∑
            	await fetchThreeDayForecast();
           	 
            	// –û–Ω–æ–≤–ª—é—î–º–æ –ø–æ—Ç–æ—á–Ω—ñ –¥–∞–Ω—ñ —Ç–∞ –ø—Ä–æ–≥–Ω–æ–∑
            	updateDate(todayDate);
            	updateCurrentActivity(averageK, todayDate);
           	 
            	// –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Ä–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ –¥–ª—è 3 –¥–Ω—ñ–≤ –∑ API —ñ –¥–ª—è —Ä–µ—à—Ç–∏ –¥–Ω—ñ –º–æ–¥–µ–ª—é—î–º–æ
            	const forecastData = [3, 4, 3, 2, 2, 3, 2];
            	forecastData[0] = averageK;
            	displayForecast(forecastData);
           	 
            	// –û–Ω–æ–≤–ª—é—î–º–æ —Ç–∞–π–º—Å—Ç–∞–º–ø –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
            	if (lastUpdatedElement) {
                	lastUpdatedElement.textContent = new Date().toLocaleString('uk-UA');
            	}
           	 
            	// –ü—Ä–∏—Ö–æ–≤—É—î–º–æ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
            	loadingIndicator.classList.add('hidden');
            	showStormNotification(averageK);
            	
            	// –î–æ–¥–∞—î–º–æ —Ç–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ –¥–ª—è 3-–¥–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑—É
            	const threeDayForecast = [
                	[2, 3, 4, 3, 2, 3, 4, 3],
                	[3, 4, 5, 4, 3, 2, 3, 4],
                	[4, 3, 2, 3, 4, 5, 4, 3]
            	];
            	
            	// –û–Ω–æ–≤–ª—é—î–º–æ –≥—Ä–∞—Ñ—ñ–∫–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –¥–Ω—è –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º –∑–º—ñ—â–µ–Ω–Ω—è–º –¥–∞—Ç–∏
            	const days = document.querySelectorAll('.card.bg-gray-700');
            	days.forEach((day, index) => {
                	updateHourlyChart(day, threeDayForecast[index], index);
            	});
        	} catch (e) {
            	console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö:', e);
            	
            	// –ü–æ–∫–∞–∑—É—î–º–æ –ø–æ–º–∏–ª–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
            	errorContainer.classList.remove('hidden');
            	errorMessage.textContent = e.message;
            	
            	// –Ø–∫—â–æ —î –∫–µ—à–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —ó—Ö
            	const cachedData = getCachedData('k-index-data');
            	if (cachedData) {
                	console.log("–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∫–µ—à–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ");
                	// –û–±—Ä–æ–±–ª—è—î–º–æ –∫–µ—à–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ
                	try {
                    	const today = new Date().toISOString().slice(0, 10);
                    	const todayData = cachedData.filter(d => d.time_tag.includes(today)).map(d => d.kp_index);
                    	
                    	if (todayData.length > 0) {
                        	const averageK = Math.round(todayData.reduce((a, b) => a + b, 0) / todayData.length);
                        	const todayDate = new Date().toLocaleDateString('uk-UA', { day: 'numeric', month: 'numeric', year: 'numeric' });
                        	
                        	// –û–Ω–æ–≤–ª—é—î–º–æ –µ–ª–µ–º–µ–Ω—Ç–∏ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ
                        	updateDate(todayDate);
                        	updateCurrentActivity(averageK, todayDate);
                        	
                        	const forecastData = [3, 4, 3, 2, 2, 3, 2];
                        	forecastData[0] = averageK;
                        	displayForecast(forecastData);
                        	
                        	errorMessage.textContent += " –í—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –∫–µ—à–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ.";
                    	}
                	} catch (cacheError) {
                    	console.error('–ü–æ–º–∏–ª–∫–∞ –æ–±—Ä–æ–±–∫–∏ –∫–µ—à–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö:', cacheError);
                	}
            	} else {
                	// –Ø–∫—â–æ –Ω–µ–º–∞—î –∫–µ—à–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö, –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
                	const defaultKIndex = 3;
                	const todayDate = new Date().toLocaleDateString('uk-UA', { day: 'numeric', month: 'numeric', year: 'numeric' });
                	
                	updateDate(todayDate);
                	updateCurrentActivity(defaultKIndex, todayDate);
                	
                	const forecastData = [3, 4, 3, 2, 2, 3, 2];
                	displayForecast(forecastData);
                	
                	errorMessage.textContent += " –í—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –¥–∞–Ω—ñ.";
            	}
            	
            	loadingIndicator.classList.add('hidden');
        	}
    	}

    	// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –∫–µ—à—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö
    	function cacheData(key, data, expirationMinutes = 60) {
        	const item = {
            	data: data,
            	expiry: new Date().getTime() + (expirationMinutes * 60 * 1000)
        	};
        	localStorage.setItem(key, JSON.stringify(item));
    	}

    	// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–µ—à–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö
    	function getCachedData(key) {
        	const cachedItem = localStorage.getItem(key);
        	if (!cachedItem) return null;
       	 
        	const item = JSON.parse(cachedItem);
        	const now = new Date().getTime();
        	if (now > item.expiry) {
            	localStorage.removeItem(key);
            	return null;
        	}
       	 
        	return item.data;
    	}

    	// –û–±—Ä–æ–±–∫–∞ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –Ω–∞ –ø–æ–≥–æ–¥–∏–Ω–Ω–∏–π –±–ª–æ–∫
    	const hourBlocks = document.querySelectorAll('.hour-block');
    	hourBlocks.forEach(block => {
        	block.addEventListener('click', function() {
            	const kIndexText = this.querySelector('p:last-child').textContent;
            	const kIndex = parseFloat(kIndexText);
            	if (!isNaN(kIndex)) {
                	const todayDate = new Date().toLocaleDateString('uk-UA', { day: 'numeric', month: 'numeric', year: 'numeric' });
                	updateCurrentActivity(kIndex, todayDate);
            	}
        	});
    	});

    	 // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è G-class —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä—ñ–≤ –¥–æ hour-block
    	function updateHourBlocks() {
        	const hourBlocks = document.querySelectorAll('.hour-block');
        	hourBlocks.forEach(block => {
            	const kIndexText = block.querySelector('p:last-child').textContent;
            	const kIndex = parseFloat(kIndexText);
            	if (!isNaN(kIndex)) {
                	if (kIndex >= 5 && kIndex < 6) block.classList.add('g1');
                	else if (kIndex >= 6 && kIndex < 7) block.classList.add('g2');
                	else if (kIndex >= 7 && kIndex < 8) block.classList.add('g3');
                	else if (kIndex >= 8 && kIndex < 9) block.classList.add('g4');
                	else if (kIndex >= 9) block.classList.add('g5');
            	}
        	});
    	}

		function updateHourlyChart(dayElement, data, dayOffset = 0) {
			const chart = dayElement.querySelector('.k-chart');
			const barsContainer = chart.querySelector('.chart-bars');
			barsContainer.innerHTML = '';
			
			// –û–Ω–æ–≤–ª—é—î–º–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∑ –¥–∞—Ç–æ—é
			const dateTitle = dayElement.querySelector('h3');
			const currentDate = new Date();
			currentDate.setDate(currentDate.getDate() + dayOffset);
			
			const formattedDate = currentDate.toLocaleDateString('uk-UA', {
				day: 'numeric',
				month: 'long',
				year: 'numeric'
			});
			dateTitle.textContent = formattedDate;
			
			// –°—Ç–≤–æ—Ä—é—î–º–æ 8 –±–∞—Ä—ñ–≤ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ 3-–≥–æ–¥–∏–Ω–Ω–æ–≥–æ —ñ–Ω—Ç–µ—Ä–≤–∞–ª—É
			for (let i = 0; i < 8; i++) {
				const value = data[i] || 0;
				const bar = document.createElement('div');
				bar.className = 'k-bar';
				
				// –í–∏—Å–æ—Ç–∞ –±–∞—Ä—É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –∑–Ω–∞—á–µ–Ω–Ω—è K-—ñ–Ω–¥–µ–∫—Å—É (0-9)
				const height = (value / 9) * 100;
				
				// –ü–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è –±–∞—Ä—É (–∫–æ–∂–Ω—ñ 3 –≥–æ–¥–∏–Ω–∏)
				const left = (i * 100) / 8; // –†—ñ–≤–Ω–æ–º—ñ—Ä–Ω–µ —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω–Ω—è –ø–æ —à–∏—Ä–∏–Ω—ñ
				
				bar.style.height = `${height}%`;
				bar.style.left = `${left}%`;
				
				// –ö–æ–ª—ñ—Ä –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ –∑–Ω–∞—á–µ–Ω–Ω—è
				if (value <= 3) bar.classList.add('low');
				else if (value <= 5) bar.classList.add('moderate');
				else bar.classList.add('high');
				
				bar.title = `${String(i * 3).padStart(2, '0')}:00 - ${String((i + 1) * 3).padStart(2, '0')}:00\nK-—ñ–Ω–¥–µ–∫—Å: ${value}`;
				
				barsContainer.appendChild(bar);
			}
		}

    	// –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
    	document.addEventListener('DOMContentLoaded', () => {
        	updateHourBlocks();
        	requestNotificationPermission();
    	});

    	// –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –¥–∞–Ω—ñ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
    	fetchKIndexData();
   	 
    	// –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —ñ–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∫–æ–∂–Ω—ñ 3 –≥–æ–¥–∏–Ω–∏
    	setInterval(fetchKIndexData, 3 * 60 * 60 * 1000);
   	 
    	// –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ–π –¥–ª—è —Ä–µ–∂–∏–º—É –æ—Ñ–ª–∞–π–Ω/–æ–Ω–ª–∞–π–Ω
    	window.addEventListener('online', () => {
        	fetchKIndexData();
        	errorContainer.classList.add('hidden');
    	});
   	 
    	window.addEventListener('offline', () => {
        	errorContainer.classList.remove('hidden');
        	errorMessage.textContent = "–í–∏ –æ—Ñ–ª–∞–π–Ω. –í—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –∫–µ—à–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ.";
    	});

    	// Add PWA support
    	if ('serviceWorker' in navigator) {
        	navigator.serviceWorker.register('/sw.js')
            	.then(registration => {
                	console.log('ServiceWorker registration successful with scope: ', registration.scope);
            	})
            	.catch(err => {
                	console.log('ServiceWorker registration failed: ', err);
            	});
    	}

    	// Add notification support
    	function requestNotificationPermission() {
        	if (!("Notification" in window)) {
            	return;
        	}
        	
        	Notification.requestPermission().then(permission => {
            	if (permission === "granted") {
                	subscribeToNotifications();
            	}
        	});
    	}

		// –û–Ω–æ–≤–ª—é—î–º–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–æ—á–æ–∫ –±–æ–ª—é
		function updateBodyPainPoints(kIndex) {
			const painPoints = document.querySelectorAll('.pain-point');
			const symptoms = getHealthInfo(kIndex).symptoms;
			
			// –û–Ω–æ–≤–ª—é—î–º–æ –≤–∏–¥–∏–º—ñ—Å—Ç—å —Ç–æ—á–æ–∫ –±–æ–ª—é –±–∞–∑—É—é—á–∏—Å—å –Ω–∞ —Å–∏–º–ø—Ç–æ–º–∞—Ö
			painPoints.forEach(point => {
				const type = point.classList[1];
				if (type === 'head' && symptoms.toLowerCase().includes('–≥–æ–ª–æ–≤–Ω–∏–π –±—ñ–ª—å')) {
					point.style.display = 'block';
				} else {
					point.style.display = 'none';
				}
			});

			// –û–Ω–æ–≤–ª—é—î–º–æ –ø–æ–∫–∞–∑–Ω–∏–∫–∏ —Ç–∏—Å–∫—É
			const pressure = calculatePressure(kIndex);
			updatePressureBars(pressure.systolic, pressure.diastolic);
		}

		function updatePressureBars(systolic, diastolic) {
			const systolicBar = document.querySelector('.pressure-bar.systolic');
			const diastolicBar = document.querySelector('.pressure-bar.diastolic');
			const systolicValue = document.querySelector('.systolic-value');
			const diastolicValue = document.querySelector('.diastolic-value');
			
			// –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –≤–∏—Å–æ—Ç–∞ —à–∫–∞–ª–∏ - 200px
			const maxHeight = 200;
			
			// –†–æ–∑—Ä–∞—Ö–æ–≤—É—î–º–æ –≤–∏—Å–æ—Ç—É –≤ –ø—ñ–∫—Å–µ–ª—è—Ö
			const systolicHeight = (systolic / 200) * maxHeight;
			const diastolicHeight = (diastolic / 200) * maxHeight;
			
			// –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –≤–∏—Å–æ—Ç—É —Å—Ç–æ–≤–ø—á–∏–∫—ñ–≤
			systolicBar.style.height = `${systolicHeight}px`;
			diastolicBar.style.height = `${diastolicHeight}px`;
			
			// –û–Ω–æ–≤–ª—é—î–º–æ –∑–Ω–∞—á–µ–Ω–Ω—è
			systolicValue.textContent = systolic;
			diastolicValue.textContent = diastolic;
		}

		function calculatePressure(kIndex) {
			let systolic, diastolic;
			
			if (kIndex <= 2) {
				systolic = 120;
				diastolic = 80;
			} else if (kIndex <= 4) {
				systolic = 130 + (kIndex - 3) * 10; // 130-140
				diastolic = 90;
			} else if (kIndex <= 6) {
				systolic = 150 + (kIndex - 5) * 10; // 150-160
				diastolic = 100;
			} else if (kIndex <= 8) {
				systolic = 170 + (kIndex - 7) * 10; // 170-180
				diastolic = 110;
			} else {
				systolic = 190;
				diastolic = 120;
			}
			
			return { systolic, diastolic };
		}

		function updateWeatherIcons(weatherData) {
			const weatherIconsContainer = document.querySelector('.weather-icons');
			weatherIconsContainer.innerHTML = '';

			// –î–æ–¥–∞—î–º–æ —ñ–∫–æ–Ω–∫–∏ –ø–æ–≥–æ–¥–∏ –¥–ª—è –∫–æ–∂–Ω–∏—Ö 3 –≥–æ–¥–∏–Ω
			const icons = [
				{ icon: 'üåô', time: '00:00', temp: '-2¬∞' },
				{ icon: 'üåô', time: '03:00', temp: '-4¬∞' },
				{ icon: 'üåô', time: '06:00', temp: '-4¬∞' },
				{ icon: '‚õÖ', time: '09:00', temp: '-1¬∞' },
				{ icon: '‚òÄÔ∏è', time: '12:00', temp: '3¬∞' },
				{ icon: '‚õÖ', time: '15:00', temp: '6¬∞' },
				{ icon: '‚òÅÔ∏è', time: '18:00', temp: '4¬∞' },
				{ icon: 'üåô', time: '21:00', temp: '1¬∞' }
			];

			icons.forEach(item => {
				const iconDiv = document.createElement('div');
				iconDiv.className = 'weather-icon-container text-center';
				iconDiv.innerHTML = `
					<div class="text-2xl mb-1">${item.icon}</div>
					<div class="text-xs text-gray-400">${item.time}</div>
					<div class="text-sm">${item.temp}</div>
				`;
				weatherIconsContainer.appendChild(iconDiv);
			});
		}

		// –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
		document.addEventListener('DOMContentLoaded', () => {
			updateWeatherIcons();
		});

		// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–ª—É–∂–±–æ–≤–æ–≥–æ –≤–æ—Ä–∫–µ—Ä–∞, —è–∫—â–æ –≤—ñ–Ω –Ω–µ —ñ—Å–Ω—É—î
		function createServiceWorker() {
			// –¶–µ–π –∫–æ–¥ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ª–∏—à–µ –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
			if (!('serviceWorker' in navigator)) return;
			
			try {
				// –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Ñ–∞–π–ª—É sw.js
				fetch('/sw.js')
					.catch(() => {
						console.log('Creating service worker file');
						// –°—Ç–≤–æ—Ä—é—î–º–æ –ø—Ä–æ—Å—Ç–∏–π —Å–ª—É–∂–±–æ–≤–∏–π –≤–æ—Ä–∫–µ—Ä –¥–ª—è –∫–µ—à—É–≤–∞–Ω–Ω—è
						const swContent = `
						const CACHE_NAME = 'magnetic-storms-cache-v1';
						const urlsToCache = [
							'/',
							'/index.html',
							'/icons/human.png',
							'/icons/storm-icon.png',
							'/manifest.json'
						];

						// –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤—Ü—ñ - –∫–µ—à—É—î–º–æ –æ—Å–Ω–æ–≤–Ω—ñ —Ñ–∞–π–ª–∏
						self.addEventListener('install', event => {
							event.waitUntil(
								caches.open(CACHE_NAME)
									.then(cache => {
										return cache.addAll(urlsToCache);
									})
							);
						});

						// –ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó - –≤–∏–¥–∞–ª—è—î–º–æ —Å—Ç–∞—Ä—ñ –∫–µ—à—ñ
						self.addEventListener('activate', event => {
							event.waitUntil(
								caches.keys().then(cacheNames => {
									return Promise.all(
										cacheNames.map(cacheName => {
											if (cacheName !== CACHE_NAME) {
												return caches.delete(cacheName);
											}
										})
									);
								})
							);
						});

						// –ü–µ—Ä–µ—Ö–æ–ø–ª—é—î–º–æ –∑–∞–ø–∏—Ç–∏ —ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î–º–æ –∑ –∫–µ—à—É –∞–±–æ –º–µ—Ä–µ–∂—ñ
						self.addEventListener('fetch', event => {
							event.respondWith(
								caches.match(event.request)
									.then(response => {
										// –Ø–∫—â–æ —Ä–µ—Å—É—Ä—Å –∑–Ω–∞–π–¥–µ–Ω–æ –≤ –∫–µ—à—ñ - –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –π–æ–≥–æ
										if (response) {
											return response;
										}
										
										// –Ü–Ω–∞–∫—à–µ —Ä–æ–±–∏–º–æ –º–µ—Ä–µ–∂–µ–≤–∏–π –∑–∞–ø–∏—Ç
										return fetch(event.request)
											.then(response => {
												// –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –∑–∞–ø–∏—Ç —É—Å–ø—ñ—à–Ω–∏–π
												if (!response || response.status !== 200 || response.type !== 'basic') {
													return response;
												}
												
												// –ö–ª–æ–Ω—É—î–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å, —â–æ–± –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –¥–≤—ñ—á—ñ
												const responseToCache = response.clone();
												
												// –î–æ–¥–∞—î–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤ –∫–µ—à
												caches.open(CACHE_NAME)
													.then(cache => {
														cache.put(event.request, responseToCache);
													});
												
												return response;
											})
											.catch(() => {
												// –Ø–∫—â–æ –æ—Ñ–ª–∞–π–Ω, –ø—Ä–æ–±—É—î–º–æ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –∫–µ—à–æ–≤–∞–Ω–∏–π –∑–∞–ø–∏—Ç –Ω–∞ –≥–æ–ª–æ–≤–Ω—É
												if (event.request.mode === 'navigate') {
													return caches.match('/');
												}
												return new Response('Offline content not available');
											});
									})
							);
						});
						
						// –û–±—Ä–æ–±–∫–∞ push-–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
						self.addEventListener('push', event => {
							let data = { title: '–ú–∞–≥–Ω—ñ—Ç–Ω–∞ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å', body: '–û–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –ø—Ä–æ –º–∞–≥–Ω—ñ—Ç–Ω—É –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å.' };
							
							try {
								if (event.data) {
									data = JSON.parse(event.data.text());
								}
							} catch (e) {
								console.error('Error parsing push data', e);
							}
							
							const options = {
								body: data.body,
								icon: '/icons/storm-icon.png',
								badge: '/icons/storm-icon.png',
								vibrate: [100, 50, 100],
								data: {
									dateOfArrival: Date.now(),
									primaryKey: 1
								}
							};
							
							event.waitUntil(
								self.registration.showNotification(data.title, options)
							);
						});
						
						// –û–±—Ä–æ–±–∫–∞ –∫–ª—ñ–∫—ñ–≤ –ø–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º
						self.addEventListener('notificationclick', event => {
							event.notification.close();
							
							event.waitUntil(
								clients.matchAll({ type: 'window' })
									.then(clientList => {
										// –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —î –≤—ñ–¥–∫—Ä–∏—Ç—ñ –≤—ñ–∫–Ω–∞ –¥–æ–¥–∞—Ç–∫—É
										for (const client of clientList) {
											if (client.url === '/' && 'focus' in client) {
												return client.focus();
											}
										}
												
										// –Ø–∫—â–æ –Ω–µ–º–∞—î - –≤—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ –Ω–æ–≤–µ –≤—ñ–∫–Ω–æ
										if (clients.openWindow) {
											return clients.openWindow('/');
										}
									})
							);
						});
						`;
						
						// –°—Ç–≤–æ—Ä—é—î–º–æ —Ñ–∞–π–ª sw.js
						const blob = new Blob([swContent], { type: 'application/javascript' });
						const elem = document.createElement('a');
						elem.href = URL.createObjectURL(blob);
						elem.download = 'sw.js';
						document.body.appendChild(elem);
						elem.click();
						document.body.removeChild(elem);
						
						alert('–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Ñ–∞–π–ª sw.js —ñ —Ä–æ–∑–º—ñ—Å—Ç—ñ—Ç—å –π–æ–≥–æ –≤ –∫–æ—Ä–µ–Ω—ñ –≤–∞—à–æ–≥–æ —Å–∞–π—Ç—É –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó PWA —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É.');
					});
			} catch (error) {
				console.error('Error creating service worker:', error);
			}
		}

		// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è manifest.json, —è–∫—â–æ –π–æ–≥–æ –Ω–µ–º–∞—î
		function createManifest() {
			try {
				// –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Ñ–∞–π–ª—É manifest.json
				fetch('/manifest.json')
					.catch(() => {
						console.log('Creating manifest file');
						// –°—Ç–≤–æ—Ä—é—î–º–æ –ø—Ä–æ—Å—Ç–∏–π manifest.json
						const manifestContent = `
						{
							"name": "–°–æ–Ω—è—á–Ω–∞ –ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ –ó–¥–æ—Ä–æ–≤'—è",
							"short_name": "–ú–∞–≥–Ω—ñ—Ç–Ω—ñ –ë—É—Ä—ñ",
							"description": "–î–æ–¥–∞—Ç–æ–∫ –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Å–æ–Ω—è—á–Ω–æ—ó –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ —Ç–∞ –º–æ–∂–ª–∏–≤–æ–≥–æ –≤–ø–ª–∏–≤—É –Ω–∞ –∑–¥–æ—Ä–æ–≤'—è",
							"start_url": "/",
							"display": "standalone",
							"background_color": "#1f2937",
							"theme_color": "#374151",
							"icons": [
								{
									"src": "/icons/icon-192x192.png",
									"sizes": "192x192",
									"type": "image/png"
								},
								{
									"src": "/icons/icon-512x512.png",
									"sizes": "512x512",
									"type": "image/png"
								}
							]
						}
						`;
						
						// –°—Ç–≤–æ—Ä—é—î–º–æ —Ñ–∞–π–ª manifest.json
						const blob = new Blob([manifestContent], { type: 'application/json' });
						const elem = document.createElement('a');
						elem.href = URL.createObjectURL(blob);
						elem.download = 'manifest.json';
						document.body.appendChild(elem);
						elem.click();
						document.body.removeChild(elem);
						
						alert('–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Ñ–∞–π–ª manifest.json —ñ —Ä–æ–∑–º—ñ—Å—Ç—ñ—Ç—å –π–æ–≥–æ –≤ –∫–æ—Ä–µ–Ω—ñ –≤–∞—à–æ–≥–æ —Å–∞–π—Ç—É –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó PWA —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É.');
					});
			} catch (error) {
				console.error('Error creating manifest:', error);
			}
		}

		// –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—ó –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
		document.addEventListener('DOMContentLoaded', () => {
			updateWeatherIcons();
			updateHourBlocks();
			requestNotificationPermission();
			
			// –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è PWA —Ñ–∞–π–ª—ñ–≤
			createServiceWorker();
			createManifest();
		});

		function showStormNotification(kIndex) {
			if (Notification.permission === "granted" && kIndex >= 5) {
				new Notification("–£–≤–∞–≥–∞! –ì–µ–æ–º–∞–≥–Ω—ñ—Ç–Ω–∞ –±—É—Ä—è", {
					body: `–ü–æ—Ç–æ—á–Ω–∏–π K-—ñ–Ω–¥–µ–∫—Å: ${kIndex}. –ú–æ–∂–ª–∏–≤–∏–π –≤–ø–ª–∏–≤ –Ω–∞ —Å–∞–º–æ–ø–æ—á—É—Ç—Ç—è.`,
					icon: "/icons/storm-icon.png"
				});
			}
		}
	</script>
	<!-- –í—ñ–¥–µ–æ—Ä–µ–∫–ª–∞–º–∞ -->
	<ins class="adsbygoogle"
		 style="display:block"
		 data-ad-client="ca-pub-YOUR_PUBLISHER_ID"
		 data-ad-slot="YOUR_VIDEO_AD_SLOT_ID"
		 data-ad-format="auto"
		 data-full-width-responsive="true"></ins>
	<script>
		 (adsbygoogle = window.adsbygoogle || []).push({});
	</script>
</body>
</html>


